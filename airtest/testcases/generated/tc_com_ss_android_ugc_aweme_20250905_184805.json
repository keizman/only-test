{
  "testcase_id": "TC_COM_SS_ANDROID_UGC_AWEME_20250905_184805",
  "name": "抖音智能搜索测试",
  "version": "2.0.0",
  "description": "基于用户需求生成的智能测试用例: 在抖音APP中搜索'美食视频'，如果搜索框有历史记录先清空",
  "generated_at": "2025-09-05T18:48:05.024722",
  "generation_method": "llm_assisted",
  "original_description": "在抖音APP中搜索'美食视频'，如果搜索框有历史记录先清空",
  "target_app": "com.ss.android.ugc.aweme",
  "metadata": {
    "tags": [
      "llm_generated",
      "search",
      "smart_judgment",
      "demo"
    ],
    "priority": "high",
    "estimated_duration": 60,
    "device_types": [
      "android_phone"
    ],
    "complexity": "conditional_logic",
    "ai_friendly": true
  },
  "variables": {
    "search_keyword": "美食视频",
    "target_app_package": "com.ss.android.ugc.aweme",
    "max_wait_time": 20
  },
  "execution_path": [
    {
      "step": 1,
      "action": "click",
      "target": {
        "priority_selectors": [
          {
            "resource_id": "com.ss.android.ugc.aweme:id/search_btn"
          },
          {
            "content_desc": "搜索"
          },
          {
            "text": "搜索"
          }
        ]
      },
      "description": "点击抖音搜索按钮",
      "success_criteria": "成功进入搜索页面",
      "execution_assets": [
        {
          "type": "screenshot",
          "step_number": 1,
          "action_type": "click",
          "timing": "before",
          "filename": "step01_click_before_20250905_184805_057.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step01_click_before_20250905_184805_057.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step01_click_before_20250905_184805_057.png",
          "timestamp": "20250905_184805_057",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 1,
          "action_type": "click",
          "timing": "after",
          "filename": "step01_click_after_20250905_184805_073.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step01_click_after_20250905_184805_073.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step01_click_after_20250905_184805_073.png",
          "timestamp": "20250905_184805_073",
          "file_size": 197,
          "metadata": {}
        }
      ]
    },
    {
      "step": 2,
      "action": "conditional_action",
      "condition": {
        "type": "element_content_check",
        "target": {
          "priority_selectors": [
            {
              "resource_id": "com.ss.android.ugc.aweme:id/search_edit"
            },
            {
              "class": "android.widget.EditText"
            }
          ]
        },
        "check": "has_text_content"
      },
      "conditional_paths": {
        "if_has_content": {
          "action": "click",
          "target": {
            "priority_selectors": [
              {
                "resource_id": "com.ss.android.ugc.aweme:id/search_clear"
              },
              {
                "content_desc": "清除"
              }
            ]
          },
          "reason": "搜索框有历史内容，需要先清空"
        },
        "if_empty": {
          "action": "input",
          "target": {
            "resource_id": "com.ss.android.ugc.aweme:id/search_edit"
          },
          "data": "${search_keyword}",
          "reason": "搜索框为空，直接输入搜索词"
        }
      },
      "description": "🧠 智能判断搜索框状态并选择操作",
      "business_logic": "确保搜索框处于正确状态",
      "execution_assets": [
        {
          "type": "screenshot",
          "step_number": 2,
          "action_type": "conditional_action",
          "timing": "before",
          "filename": "step02_conditional_action_before_20250905_184805_197.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_before_20250905_184805_197.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_before_20250905_184805_197.png",
          "timestamp": "20250905_184805_197",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "omniparser_result",
          "step_number": 2,
          "filename": "step02_omni_result_20250905_184805_207.json",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step02_omni_result_20250905_184805_207.json",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step02_omni_result_20250905_184805_207.json",
          "timestamp": "20250905_184805_207",
          "file_size": 780,
          "elements_recognized": 2
        },
        {
          "type": "screenshot",
          "step_number": 2,
          "action_type": "conditional_action",
          "timing": "after",
          "filename": "step02_conditional_action_after_20250905_184805_220.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_after_20250905_184805_220.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_after_20250905_184805_220.png",
          "timestamp": "20250905_184805_220",
          "file_size": 197,
          "metadata": {}
        }
      ]
    },
    {
      "step": 3,
      "action": "input",
      "target": {
        "resource_id": "com.ss.android.ugc.aweme:id/search_edit"
      },
      "data": "${search_keyword}",
      "description": "输入搜索关键词",
      "execution_assets": [
        {
          "type": "screenshot",
          "step_number": 3,
          "action_type": "input",
          "timing": "before",
          "filename": "step03_input_before_20250905_184805_336.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step03_input_before_20250905_184805_336.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step03_input_before_20250905_184805_336.png",
          "timestamp": "20250905_184805_336",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 3,
          "action_type": "input",
          "timing": "after",
          "filename": "step03_input_after_20250905_184805_349.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step03_input_after_20250905_184805_349.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step03_input_after_20250905_184805_349.png",
          "timestamp": "20250905_184805_349",
          "file_size": 197,
          "metadata": {}
        }
      ]
    },
    {
      "step": 4,
      "action": "click",
      "target": {
        "priority_selectors": [
          {
            "resource_id": "com.ss.android.ugc.aweme:id/search_submit"
          },
          {
            "text": "搜索"
          }
        ]
      },
      "description": "点击搜索按钮执行搜索",
      "execution_assets": [
        {
          "type": "screenshot",
          "step_number": 4,
          "action_type": "click",
          "timing": "before",
          "filename": "step04_click_before_20250905_184805_468.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step04_click_before_20250905_184805_468.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step04_click_before_20250905_184805_468.png",
          "timestamp": "20250905_184805_468",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 4,
          "action_type": "click",
          "timing": "after",
          "filename": "step04_click_after_20250905_184805_481.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step04_click_after_20250905_184805_481.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step04_click_after_20250905_184805_481.png",
          "timestamp": "20250905_184805_481",
          "file_size": 197,
          "metadata": {}
        }
      ]
    }
  ],
  "llm_analysis": {
    "detected_intent": "搜索功能测试",
    "key_actions": [
      "导航到搜索",
      "智能状态判断",
      "输入关键词",
      "执行搜索"
    ],
    "conditional_logic": [
      "搜索框内容状态检查"
    ],
    "confidence": 0.95
  },
  "device_adaptation": {
    "detection_time": "2025-09-05T18:48:05.043237",
    "detected_device": {
      "detection_time": "2025-09-05T18:48:05.043190",
      "host_system": "Linux",
      "framework_available": false,
      "device_name": "Simulated_Device",
      "android_version": "13.0",
      "sdk_version": "33",
      "brand": "Generic",
      "manufacturer": "Android",
      "device_model": "simulator",
      "screen_info": {
        "resolution": "1080x1920",
        "density": 420,
        "orientation": "portrait"
      },
      "note": "使用模拟设备信息"
    },
    "adaptation_rules": {
      "touch_adaptation": {
        "base_resolution": "1080x1920",
        "current_resolution": "1080x1920",
        "scale_factor_x": 1.0,
        "scale_factor_y": 1.0,
        "touch_offset": {
          "x": 0,
          "y": 50
        }
      },
      "recognition_adaptation": {
        "preferred_mode": "xml_priority",
        "xml_recognition": {
          "enabled": true,
          "timeout": 10,
          "retry_count": 3
        },
        "visual_recognition": {
          "enabled": true,
          "confidence_threshold": 0.8,
          "template_matching_threshold": 0.7
        }
      },
      "performance_adaptation": {
        "action_delay": 1.0,
        "element_wait_timeout": 20,
        "screenshot_quality": 90
      },
      "app_specific": {
        "launch_timeout": 30,
        "page_load_timeout": 20,
        "animation_wait": 1.0
      }
    },
    "assets_path_pattern": {
      "base_path": "assets/com_ss_android_ugc_aweme_Simulated_Device",
      "screenshots_pattern": "assets/com_ss_android_ugc_aweme_Simulated_Device/step{step_num}_{action}_{timestamp}.png",
      "elements_pattern": "assets/com_ss_android_ugc_aweme_Simulated_Device/step{step_num}_element_{element_type}_{timestamp}.png",
      "omniparser_pattern": "assets/com_ss_android_ugc_aweme_Simulated_Device/step{step_num}_omni_result_{timestamp}.json",
      "execution_log": "assets/com_ss_android_ugc_aweme_Simulated_Device/execution_log.json"
    }
  },
  "session_assets": {
    "session_info": {
      "session_id": "TC_COM_SS_ANDROID_UGC_AWEME_20250905_184805_20250905_184805",
      "app_package": "com.ss.android.ugc.aweme",
      "device_name": "Simulated_Device",
      "testcase_id": "TC_COM_SS_ANDROID_UGC_AWEME_20250905_184805",
      "start_time": "2025-09-05T18:48:05.052807",
      "session_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device",
      "assets_saved": [
        {
          "type": "screenshot",
          "step_number": 1,
          "action_type": "click",
          "timing": "before",
          "filename": "step01_click_before_20250905_184805_057.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step01_click_before_20250905_184805_057.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step01_click_before_20250905_184805_057.png",
          "timestamp": "20250905_184805_057",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 1,
          "action_type": "click",
          "timing": "after",
          "filename": "step01_click_after_20250905_184805_073.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step01_click_after_20250905_184805_073.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step01_click_after_20250905_184805_073.png",
          "timestamp": "20250905_184805_073",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 2,
          "action_type": "conditional_action",
          "timing": "before",
          "filename": "step02_conditional_action_before_20250905_184805_197.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_before_20250905_184805_197.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_before_20250905_184805_197.png",
          "timestamp": "20250905_184805_197",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "omniparser_result",
          "step_number": 2,
          "filename": "step02_omni_result_20250905_184805_207.json",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step02_omni_result_20250905_184805_207.json",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step02_omni_result_20250905_184805_207.json",
          "timestamp": "20250905_184805_207",
          "file_size": 780,
          "elements_recognized": 2
        },
        {
          "type": "screenshot",
          "step_number": 2,
          "action_type": "conditional_action",
          "timing": "after",
          "filename": "step02_conditional_action_after_20250905_184805_220.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_after_20250905_184805_220.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step02_conditional_action_after_20250905_184805_220.png",
          "timestamp": "20250905_184805_220",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 3,
          "action_type": "input",
          "timing": "before",
          "filename": "step03_input_before_20250905_184805_336.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step03_input_before_20250905_184805_336.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step03_input_before_20250905_184805_336.png",
          "timestamp": "20250905_184805_336",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 3,
          "action_type": "input",
          "timing": "after",
          "filename": "step03_input_after_20250905_184805_349.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step03_input_after_20250905_184805_349.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step03_input_after_20250905_184805_349.png",
          "timestamp": "20250905_184805_349",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 4,
          "action_type": "click",
          "timing": "before",
          "filename": "step04_click_before_20250905_184805_468.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step04_click_before_20250905_184805_468.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step04_click_before_20250905_184805_468.png",
          "timestamp": "20250905_184805_468",
          "file_size": 197,
          "metadata": {}
        },
        {
          "type": "screenshot",
          "step_number": 4,
          "action_type": "click",
          "timing": "after",
          "filename": "step04_click_after_20250905_184805_481.png",
          "relative_path": "com_ss_android_ugc_aweme_Simulated_Device/step04_click_after_20250905_184805_481.png",
          "absolute_path": "/mnt/c/Download/git/uni/airtest/assets/com_ss_android_ugc_aweme_Simulated_Device/step04_click_after_20250905_184805_481.png",
          "timestamp": "20250905_184805_481",
          "file_size": 197,
          "metadata": {}
        }
      ]
    },
    "assets_summary": {
      "first_asset": "20250905_184805_057",
      "last_asset": "20250905_184805_481",
      "asset_types": [
        "screenshot",
        "omniparser_result"
      ],
      "steps_covered": [
        1,
        2,
        3,
        4
      ],
      "total_file_size": 2356,
      "avg_file_size": 261.77777777777777
    },
    "total_screenshots": 8,
    "total_elements": 0,
    "total_omni_results": 1
  }
}