{
  "testcase_id": "TC_DEMO_SMART_SEARCH_20241205",
  "name": "æ¼”ç¤ºæ™ºèƒ½æœç´¢åŠŸèƒ½æµ‹è¯•",
  "version": "2.0.0",
  "description": "æ¼”ç¤ºOnly-Testæ¡†æ¶çš„æ™ºèƒ½æ¡ä»¶åˆ¤æ–­åŠŸèƒ½ï¼Œå±•ç¤ºå¦‚ä½•æ ¹æ®æœç´¢æ¡†çŠ¶æ€æ™ºèƒ½é€‰æ‹©æ“ä½œè·¯å¾„",
  "generated_at": "2024-12-05T10:30:00Z",
  "generated_from_template": "smart_search_template",
  "target_app": "com.example.musicapp",
  "generation_method": "llm_assisted",
  "original_description": "åœ¨æµ‹è¯•åº”ç”¨ä¸­æœç´¢'å‘¨æ°ä¼¦'ï¼Œå¦‚æœæœç´¢æ¡†æœ‰å†…å®¹å…ˆæ¸…ç©ºå†è¾“å…¥",
  "metadata": {
    "tags": ["demo", "search", "smart_judgment", "conditional", "music"],
    "priority": "high",
    "estimated_duration": 45,
    "device_types": ["android_phone"],
    "app_versions": [">=1.0.0"],
    "complexity": "conditional_logic",
    "ai_friendly": true,
    "author": "Only-Test Demo Generator",
    "category": "functional_test"
  },
  "context_awareness": {
    "current_app_state": "launched",
    "expected_page": "search_page",
    "user_session": "anonymous",
    "network_status": "connected",
    "target_app": "com.example.musicapp",
    "prerequisites": [
      "éŸ³ä¹åº”ç”¨å·²å¯åŠ¨",
      "ç½‘ç»œè¿æ¥æ­£å¸¸",
      "ç”¨æˆ·å¤„äºæœªç™»å½•çŠ¶æ€"
    ]
  },
  "variables": {
    "search_keyword": "å‘¨æ°ä¼¦",
    "target_app_package": "com.example.musicapp",
    "max_wait_time": 20,
    "expected_results_count": ">= 3"
  },
  "execution_path": [
    {
      "step": 1,
      "page": "home",
      "action": "click",
      "target": {
        "priority_selectors": [
          {"resource_id": "com.example.musicapp:id/search_btn"},
          {"resource_id": "search_button"},
          {"content_desc": "æœç´¢éŸ³ä¹"},
          {"text": "æœç´¢"},
          {"xpath": "//android.widget.ImageView[@content-desc='æœç´¢']"},
          {"visual_hint": "æœç´¢å›¾æ ‡æˆ–æ”¾å¤§é•œ"}
        ]
      },
      "description": "ç‚¹å‡»éŸ³ä¹åº”ç”¨é¦–é¡µæœç´¢æŒ‰é’®",
      "success_criteria": "æˆåŠŸè¿›å…¥æœç´¢é¡µé¢ï¼Œæ˜¾ç¤ºæœç´¢è¾“å…¥æ¡†",
      "ai_hint": "åœ¨éŸ³ä¹åº”ç”¨ä¸»ç•Œé¢å¯»æ‰¾æœç´¢å›¾æ ‡ï¼Œé€šå¸¸æ˜¯æ”¾å¤§é•œç¬¦å·æˆ–'æœç´¢'æ–‡å­—",
      "timeout": 10,
      "retry_count": 2,
      "business_logic": "ç”¨æˆ·æƒ³è¦æœç´¢éŸ³ä¹ï¼Œé¦–å…ˆéœ€è¦è¿›å…¥æœç´¢åŠŸèƒ½é¡µé¢"
    },
    {
      "step": 2,
      "page": "search_page",
      "action": "conditional_action",
      "condition": {
        "type": "element_content_check",
        "target": {
          "priority_selectors": [
            {"resource_id": "com.example.musicapp:id/search_edit"},
            {"resource_id": "search_input"},
            {"class": "android.widget.EditText"},
            {"xpath": "//android.widget.EditText[contains(@hint,'æœç´¢')]"}
          ]
        },
        "check": "has_text_content",
        "params": {
          "ignore_placeholder": true,
          "ignore_hint": true,
          "trim_whitespace": true
        }
      },
      "conditional_paths": {
        "if_has_content": {
          "action": "click",
          "target": {
            "priority_selectors": [
              {"resource_id": "com.example.musicapp:id/search_clear"},
              {"resource_id": "clear_text"},
              {"content_desc": "æ¸…é™¤æœç´¢"},
              {"xpath": "//android.widget.ImageView[@content-desc='æ¸…é™¤']"},
              {"visual_hint": "Ã—ç¬¦å·æˆ–æ¸…é™¤æŒ‰é’®"}
            ]
          },
          "reason": "æœç´¢æ¡†å·²æœ‰å†å²æœç´¢å†…å®¹ï¼Œéœ€è¦å…ˆæ¸…ç©ºæ‰èƒ½è¾“å…¥æ–°çš„æœç´¢è¯'å‘¨æ°ä¼¦'",
          "ai_hint": "å¯»æ‰¾è¾“å…¥æ¡†å³ä¾§çš„æ¸…é™¤æŒ‰é’®ï¼Œé€šå¸¸æ˜¯Ã—ç¬¦å·æˆ–'æ¸…é™¤'æ–‡å­—",
          "success_criteria": "æœç´¢æ¡†å†…å®¹è¢«å®Œå…¨æ¸…ç©º",
          "timeout": 5,
          "fallback_action": {
            "action": "long_press_and_clear",
            "target": "search_input_box",
            "description": "é•¿æŒ‰è¾“å…¥æ¡†å…¨é€‰ååˆ é™¤å†…å®¹"
          }
        },
        "if_empty": {
          "action": "input",
          "target": "search_input_box",
          "data": "${search_keyword}",
          "reason": "æœç´¢æ¡†ä¸ºç©ºï¼Œå¯ä»¥ç›´æ¥è¾“å…¥æœç´¢å…³é”®è¯'å‘¨æ°ä¼¦'",
          "ai_hint": "ç›´æ¥åœ¨ç©ºçš„æœç´¢è¾“å…¥æ¡†ä¸­è¾“å…¥æ–‡æœ¬å†…å®¹",
          "success_criteria": "æœç´¢å…³é”®è¯æˆåŠŸæ˜¾ç¤ºåœ¨è¾“å…¥æ¡†ä¸­"
        }
      },
      "description": "ğŸ§  æ™ºèƒ½åˆ¤æ–­æœç´¢æ¡†çŠ¶æ€å¹¶é€‰æ‹©ç›¸åº”æ“ä½œï¼šæœ‰å†…å®¹åˆ™æ¸…ç©ºï¼Œæ— å†…å®¹åˆ™ç›´æ¥è¾“å…¥",
      "business_logic": "ç¡®ä¿æœç´¢æ¡†å¤„äºæ­£ç¡®çŠ¶æ€ï¼Œé¿å…æ–°æ—§æœç´¢è¯æ··åˆå¯¼è‡´æœç´¢ç»“æœé”™è¯¯",
      "ai_understanding": "è¿™æ˜¯æ ¸å¿ƒçš„æ¡ä»¶åˆ¤æ–­é€»è¾‘ï¼ŒAIéœ€è¦å…ˆè§‚å¯Ÿæœç´¢æ¡†çŠ¶æ€ï¼Œç„¶åé€‰æ‹©åˆé€‚çš„æ“ä½œè·¯å¾„",
      "demo_highlight": "è¿™ä¸€æ­¥å±•ç¤ºäº†Only-Testæ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ï¼šæ™ºèƒ½æ¡ä»¶åˆ¤æ–­",
      "expected_outcomes": {
        "if_has_content": "æ¸…ç©ºæ“ä½œæˆåŠŸï¼Œæœç´¢æ¡†å˜ä¸ºç©ºç™½çŠ¶æ€",
        "if_empty": "æœç´¢è¯è¾“å…¥æˆåŠŸï¼Œå‡†å¤‡æ‰§è¡Œæœç´¢"
      }
    },
    {
      "step": 3,
      "page": "search_page",
      "action": "conditional_action",
      "condition": {
        "type": "element_content_check",
        "target": "search_input_box",
        "check": "is_empty"
      },
      "conditional_paths": {
        "if_true": {
          "action": "input",
          "target": {
            "priority_selectors": [
              {"resource_id": "com.example.musicapp:id/search_edit"},
              {"resource_id": "search_input"},
              {"class": "android.widget.EditText"}
            ]
          },
          "data": "${search_keyword}",
          "reason": "æœç´¢æ¡†å·²æ¸…ç©ºï¼Œç°åœ¨è¾“å…¥ç›®æ ‡æœç´¢è¯'å‘¨æ°ä¼¦'"
        },
        "if_false": {
          "action": "skip",
          "reason": "æœç´¢æ¡†å·²æœ‰æ­£ç¡®å†…å®¹ï¼Œè·³è¿‡é‡å¤è¾“å…¥"
        }
      },
      "description": "ç¡®ä¿æœç´¢å…³é”®è¯æ­£ç¡®è¾“å…¥åˆ°æœç´¢æ¡†ä¸­",
      "success_criteria": "æœç´¢æ¡†æ˜¾ç¤º'å‘¨æ°ä¼¦'",
      "ai_hint": "éªŒè¯æœç´¢æ¡†ä¸­çš„å†…å®¹æ˜¯å¦ä¸ºç›®æ ‡æœç´¢è¯"
    },
    {
      "step": 4,
      "page": "search_page",
      "action": "click",
      "target": {
        "priority_selectors": [
          {"resource_id": "com.example.musicapp:id/search_submit"},
          {"resource_id": "search_button"},
          {"content_desc": "å¼€å§‹æœç´¢"},
          {"text": "æœç´¢"},
          {"xpath": "//android.widget.Button[contains(@text,'æœç´¢')]"},
          {"visual_hint": "æœç´¢æŒ‰é’®æˆ–ç¡®è®¤å›¾æ ‡"}
        ]
      },
      "description": "ç‚¹å‡»æœç´¢æŒ‰é’®æ‰§è¡Œæœç´¢æ“ä½œ",
      "precondition": "æœç´¢æ¡†å·²è¾“å…¥'å‘¨æ°ä¼¦'",
      "ai_hint": "å¯»æ‰¾æœç´¢ç¡®è®¤æŒ‰é’®ï¼Œå¯èƒ½æ˜¾ç¤ºä¸º'æœç´¢'ã€'ç¡®è®¤'æˆ–æ”¾å¤§é•œå›¾æ ‡",
      "success_criteria": "æœç´¢è¯·æ±‚æˆåŠŸå‘é€ï¼Œé¡µé¢å¼€å§‹åŠ è½½æœç´¢ç»“æœ",
      "timeout": 15,
      "business_logic": "æ‰§è¡Œå®é™…çš„æœç´¢æ“ä½œï¼ŒæŸ¥æ‰¾ä¸'å‘¨æ°ä¼¦'ç›¸å…³çš„éŸ³ä¹å†…å®¹"
    },
    {
      "step": 5,
      "page": "search_results",
      "action": "wait_for_elements",
      "target": {
        "selectors": [
          {"resource_id": "com.example.musicapp:id/search_results"},
          {"class": "androidx.recyclerview.widget.RecyclerView"},
          {"xpath": "//android.widget.ListView"},
          {"visual_hint": "æœç´¢ç»“æœåˆ—è¡¨"}
        ]
      },
      "description": "ç­‰å¾…æœç´¢ç»“æœåŠ è½½å®Œæˆ",
      "timeout": "${max_wait_time}",
      "success_criteria": "æœç´¢ç»“æœåˆ—è¡¨æ˜¾ç¤ºï¼ŒåŒ…å«å‘¨æ°ä¼¦ç›¸å…³çš„éŸ³ä¹å†…å®¹",
      "ai_hint": "ç­‰å¾…é¡µé¢æ˜¾ç¤ºåŒ…å«æœç´¢ç»“æœçš„åˆ—è¡¨æˆ–ç½‘æ ¼å¸ƒå±€"
    },
    {
      "step": 6,
      "page": "search_results", 
      "action": "click",
      "target": {
        "selectors": [
          {"xpath": "//android.widget.TextView[contains(@text,'å‘¨æ°ä¼¦')][1]"},
          {"resource_id": "com.example.musicapp:id/song_item"},
          {"visual_hint": "ç¬¬ä¸€ä¸ªæœç´¢ç»“æœé¡¹"}
        ]
      },
      "description": "ç‚¹å‡»ç¬¬ä¸€ä¸ªå‘¨æ°ä¼¦ç›¸å…³çš„æœç´¢ç»“æœ",
      "success_criteria": "æˆåŠŸè¿›å…¥æ­Œæ›²è¯¦æƒ…é¡µæˆ–å¼€å§‹æ’­æ”¾",
      "timeout": 10,
      "optional": true,
      "business_logic": "éªŒè¯æœç´¢åŠŸèƒ½çš„å®Œæ•´æ€§ï¼Œç¡®ä¿æœç´¢ç»“æœå¯ä»¥æ­£å¸¸è®¿é—®"
    }
  ],
  "assertions": [
    {
      "step": 5,
      "type": "check_search_results_exist",
      "expected": true,
      "timeout": 15,
      "description": "éªŒè¯æœç´¢ç»“æœæ­£å¸¸æ˜¾ç¤º",
      "ai_understanding": "ç¡®è®¤æœç´¢åŠŸèƒ½å·¥ä½œæ­£å¸¸ï¼Œç”¨æˆ·èƒ½çœ‹åˆ°ä¸'å‘¨æ°ä¼¦'ç›¸å…³çš„æœç´¢ç»“æœ",
      "error_handling": "å¦‚æœæ— ç»“æœï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥å’Œæœç´¢å…³é”®è¯æ˜¯å¦æ­£ç¡®"
    },
    {
      "step": 5,
      "type": "check_results_count",
      "expected": "${expected_results_count}",
      "description": "éªŒè¯æœç´¢ç»“æœæ•°é‡ç¬¦åˆé¢„æœŸ",
      "tolerance": "è‡³å°‘æ˜¾ç¤º3ä¸ªç›¸å…³ç»“æœ",
      "business_validation": "ç¡®ä¿æœç´¢ç®—æ³•èƒ½æ‰¾åˆ°è¶³å¤Ÿå¤šçš„ç›¸å…³å†…å®¹"
    },
    {
      "step": 5,
      "type": "check_content_relevance",
      "expected": "å‘¨æ°ä¼¦",
      "description": "éªŒè¯æœç´¢ç»“æœä¸æœç´¢å…³é”®è¯ç›¸å…³",
      "validation_method": "æ£€æŸ¥ç»“æœæ ‡é¢˜æˆ–æè¿°ä¸­åŒ…å«æœç´¢å…³é”®è¯"
    }
  ],
  "ai_enhancement": {
    "nlp_keywords": [
      "éŸ³ä¹æœç´¢", "å‘¨æ°ä¼¦", "æ­Œæ‰‹", "æ­Œæ›²", "ä¸“è¾‘",
      "æœç´¢æ¡†", "è¾“å…¥", "æ¸…ç©º", "ç¡®è®¤", "ç»“æœ"
    ],
    "visual_cues": [
      "æœç´¢å›¾æ ‡", "æ”¾å¤§é•œ", "è¾“å…¥æ¡†", "æ¸…é™¤æŒ‰é’®", 
      "Ã—ç¬¦å·", "æœç´¢æŒ‰é’®", "ç»“æœåˆ—è¡¨", "éŸ³ä¹å°é¢"
    ],
    "user_intent": "ç”¨æˆ·æƒ³è¦åœ¨éŸ³ä¹åº”ç”¨ä¸­æœç´¢å‘¨æ°ä¼¦çš„æ­Œæ›²",
    "workflow_patterns": [
      "è¿›å…¥æœç´¢é¡µé¢ â†’ æ£€æŸ¥æœç´¢æ¡†çŠ¶æ€ â†’ æ™ºèƒ½æ¸…ç©ºæˆ–ç›´æ¥è¾“å…¥ â†’ ç¡®è®¤æœç´¢ â†’ æŸ¥çœ‹ç»“æœ â†’ é€‰æ‹©å†…å®¹"
    ],
    "decision_points": [
      "æœç´¢æ¡†æ˜¯å¦å·²æœ‰å†…å®¹ï¼Ÿ",
      "æ¸…ç©ºæ“ä½œæ˜¯å¦æˆåŠŸï¼Ÿ",
      "æœç´¢å…³é”®è¯æ˜¯å¦æ­£ç¡®è¾“å…¥ï¼Ÿ",
      "æœç´¢ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Ÿ"
    ],
    "demo_features": [
      "æ¡ä»¶åˆ†æ”¯é€»è¾‘æ¼”ç¤º",
      "æ™ºèƒ½çŠ¶æ€åˆ¤æ–­",
      "å¤šè·¯å¾„æ‰§è¡Œç­–ç•¥",
      "AIå‹å¥½çš„æ“ä½œæè¿°",
      "ä¸šåŠ¡é€»è¾‘æ¸…æ™°åŒ–"
    ],
    "learning_points": [
      "å¦‚ä½•è®¾è®¡æ¡ä»¶åˆ¤æ–­é€»è¾‘",
      "å¦‚ä½•ç¼–å†™AIå‹å¥½çš„æµ‹è¯•ç”¨ä¾‹",
      "å¦‚ä½•å¤„ç†UIçŠ¶æ€çš„ä¸ç¡®å®šæ€§",
      "å¦‚ä½•å®ç°çœŸæ­£çš„æ™ºèƒ½åŒ–æµ‹è¯•"
    ]
  },
  "llm_analysis": {
    "detected_intent": "éŸ³ä¹æœç´¢åŠŸèƒ½æµ‹è¯•",
    "key_actions": ["å¯¼èˆªåˆ°æœç´¢", "æ™ºèƒ½çŠ¶æ€åˆ¤æ–­", "æ¡ä»¶è¾“å…¥", "æ‰§è¡Œæœç´¢", "éªŒè¯ç»“æœ"],
    "conditional_logic": [
      "æœç´¢æ¡†å†…å®¹çŠ¶æ€æ£€æŸ¥",
      "åŸºäºçŠ¶æ€çš„æ“ä½œè·¯å¾„é€‰æ‹©",
      "è¾“å…¥ç¡®è®¤å’ŒéªŒè¯"
    ],
    "confidence": 0.95,
    "complexity_analysis": {
      "total_steps": 6,
      "conditional_steps": 2,
      "decision_points": 3,
      "fallback_strategies": 2
    },
    "risk_assessment": {
      "network_dependency": "medium",
      "ui_stability": "high",
      "cross_device_compatibility": "high"
    }
  },
  "llm_generation_hints": {
    "core_logic": "æ™ºèƒ½æ£€æµ‹æœç´¢æ¡†çŠ¶æ€ â†’ é€‰æ‹©æ¸…ç©ºæˆ–ç›´æ¥è¾“å…¥ç­–ç•¥ â†’ è¾“å…¥æœç´¢è¯ â†’ æ‰§è¡Œæœç´¢ â†’ éªŒè¯ç»“æœ",
    "decision_points": [
      "æœç´¢æ¡†å†…å®¹çŠ¶æ€æ£€æŸ¥",
      "æ¸…ç©ºç­–ç•¥vsç›´æ¥è¾“å…¥ç­–ç•¥é€‰æ‹©",
      "æœç´¢ç»“æœéªŒè¯"
    ],
    "alternative_flows": [
      "ç›´æ¥è¾“å…¥æµç¨‹ï¼ˆæœç´¢æ¡†ä¸ºç©ºï¼‰",
      "æ¸…ç©ºåè¾“å…¥æµç¨‹ï¼ˆæœç´¢æ¡†æœ‰å†…å®¹ï¼‰",
      "é™çº§è¾“å…¥æµç¨‹ï¼ˆæ¸…ç©ºå¤±è´¥æ—¶é•¿æŒ‰å…¨é€‰ï¼‰"
    ],
    "success_indicators": [
      "æœç´¢é¡µé¢æˆåŠŸè¿›å…¥",
      "æœç´¢æ¡†çŠ¶æ€æ­£ç¡®å¤„ç†",
      "æœç´¢å…³é”®è¯æˆåŠŸè¾“å…¥",
      "æœç´¢ç»“æœæ­£å¸¸æ˜¾ç¤º",
      "ç»“æœå†…å®¹ç›¸å…³æ€§éªŒè¯"
    ],
    "context_dependencies": [
      "éŸ³ä¹åº”ç”¨æ­£å¸¸å¯åŠ¨",
      "ç½‘ç»œè¿æ¥ç¨³å®š",
      "æœç´¢åŠŸèƒ½å¯ç”¨",
      "ç”¨æˆ·ç•Œé¢å“åº”æ­£å¸¸"
    ],
    "demo_value": "å®Œç¾å±•ç¤ºOnly-Testæ¡†æ¶çš„æ™ºèƒ½æ¡ä»¶åˆ¤æ–­èƒ½åŠ›å’ŒAIé©±åŠ¨çš„æµ‹è¯•ç”¨ä¾‹è®¾è®¡ç†å¿µ"
  },
  "recovery_actions": [
    {
      "exception": "element_content_unclear",
      "action": "use_visual_recognition",
      "reason": "XMLæ— æ³•å‡†ç¡®è·å–æœç´¢æ¡†å†…å®¹æ—¶ï¼Œå¯ç”¨Omniparserè§†è§‰è¯†åˆ«",
      "fallback": "force_clear_and_input"
    },
    {
      "exception": "conditional_logic_failed",
      "action": "fallback_to_clear_and_input",
      "reason": "æ¡ä»¶åˆ¤æ–­å¤±è´¥æ—¶ï¼Œå¼ºåˆ¶æ‰§è¡Œæ¸…ç©ºåè¾“å…¥çš„ä¿å®ˆç­–ç•¥"
    },
    {
      "exception": "search_timeout",
      "action": "retry_search",
      "params": {"max_retries": 2, "delay": 3},
      "reason": "æœç´¢è¶…æ—¶å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ï¼Œå°è¯•é‡æ–°æœç´¢"
    },
    {
      "exception": "no_search_results",
      "action": "verify_network_and_keyword",
      "reason": "æ— æœç´¢ç»“æœæ—¶éªŒè¯ç½‘ç»œè¿æ¥å’Œå…³é”®è¯æ­£ç¡®æ€§"
    },
    {
      "exception": "app_crash_during_search",
      "action": "restart_app_and_retry",
      "reason": "åº”ç”¨å´©æºƒæ—¶é‡å¯åº”ç”¨å¹¶é‡æ–°æ‰§è¡Œæœç´¢æµç¨‹"
    }
  ],
  "demo_notes": {
    "purpose": "å±•ç¤ºOnly-Testæ¡†æ¶çš„æ ¸å¿ƒèƒ½åŠ›ï¼šåŸºäºAIçš„æ™ºèƒ½æ¡ä»¶åˆ¤æ–­å’Œè‡ªé€‚åº”æµ‹è¯•æ‰§è¡Œ",
    "highlights": [
      "çœŸå®çš„æ¡ä»¶åˆ†æ”¯é€»è¾‘",
      "AIå‹å¥½çš„å…ƒæ•°æ®è®¾è®¡",
      "å¤šå±‚æ¬¡çš„å¼‚å¸¸æ¢å¤æœºåˆ¶",
      "è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹è¿½è¸ª"
    ],
    "usage_scenarios": [
      "æ¡†æ¶åŠŸèƒ½æ¼”ç¤º",
      "æ–°ç”¨æˆ·åŸ¹è®­",
      "æŠ€æœ¯æ–¹æ¡ˆéªŒè¯",
      "å¼€å‘è°ƒè¯•æµ‹è¯•"
    ],
    "expected_outcome": "æˆåŠŸæ¼”ç¤ºæ™ºèƒ½æœç´¢æµç¨‹ï¼ŒéªŒè¯æ¡†æ¶çš„æ¡ä»¶åˆ¤æ–­å’Œè‡ªé€‚åº”èƒ½åŠ›"
  }
}