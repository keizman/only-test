{
  "testcase_id": "TC_example_airtest_record",
  "case_type": "mobile",
  "target_app": "com.mobile.brasiltvmobile",
  "device_info": {
    "adb_serial": "${DEVICE_SERIAL}"
  },
  "variables": { "program_name": "西语手机端720资源02" },
  "hooks": {
    "before_all": [
      { "action": "stop_app", "comment": "重启应用清理环境状态", "wait": { "after": 3 } },
      { "action": "start_app", "comment": "启动应用并等待加载完成", "wait": { "after": 5 } },
      { "action": "tool", "tool_name": "close_ads", "comment": "进入后自动关闭广告", "params": { "mode": "continuous", "consecutive_no_ad": 2, "max_duration": 20.0 } }
    ],
    "after_all": []
  },
  "test_steps": [
    {
      "step": 1,
      "page": "home",
      "action": "click",
      "comment": "直接找到 search 相关 btn",
      "target": { "selectors": [{ "strategy": "resource_id", "value": "com.mobile.brasiltvmobile:id/mVodImageSearch" }] }
    },
    {
      "step": 2,
      "page": "search",
      "action": "input",
      "comment": "使用增强版 set_text, 自动校验是否成功输入",
      "target": { "selectors": [{ "strategy": "resource_id", "value": "com.mobile.brasiltvmobile:id/searchEt" }] },
      "data": { "text_var": "program_name" }
    },
    {
      "step": 3,
      "page": "search",
      "action": "press",
      "comment": "Enter 执行搜索操作",
      "target": { "keyevent": "Enter" }
    },
    {
      "step": 4,
      "page": "search_result",
      "action": "click_with_bias",
      "comment": "点击目标节目卡片",
      "target": {
        "selectors": [
          { "strategy": "resource_id", "value": "com.mobile.brasiltvmobile:id/mPosterName" },
          { "strategy": "text", "value": "${program_name}" }
        ],
        "bias": { "dy_px": -100 }
      }
    },
    {
      "step": 5,
      "page": "vod_playing_detail",
      "action": "click",
      "comment": "点击播放按钮开始播放视频",
      "target": { "selectors": [{ "strategy": "resource_id", "value": "com.mobile.brasiltvmobile:id/mPlayPauseIcon" }] }
    },
    {
      "step": 6,
      "page": "vod_playing_detail",
      "action": "wait_for_disappearance",
      "comment": "通常都有广告，等待 Ads 消失",
      "target": { "selectors": [{ "strategy": "text", "value": "Ads" }] },
      "wait": { "after": 2 }
    },
    {
      "step": 7,
      "page": "vod_playing_detail",
      "action": "click",
      "comment": "点击全屏按钮进入全屏播放模式",
      "target": { "selectors": [{ "strategy": "resource_id", "value": "com.mobile.brasiltvmobile:id/mImageFullScreen" }] }
    }
  ],
  "assertions": [{ "type": "check_playback_state", "expected": true, "comment": "正在正常播放" }],
  "execution_path": {
    "py": "../python/${testcase_id}_py.py"
  },
  "presentation_hints": {
    "style": "recorded"
  }
}
