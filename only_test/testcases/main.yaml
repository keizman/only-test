# ==========================================
# Only-Test 主控配置文件 (Main Configuration)
# 用于定义设备信息、测试配置和应用信息
# 避免每次都需要重新探测，提供配置复用能力
# ==========================================

# 全局配置
global_config:
  framework_version: "2.0.0"
  default_timeout: 30
  default_retry_count: 3
  debug_mode: false
  log_level: "INFO"
  playback_auto_wake:
    ensure_visible_on_playback: true
    probe_min_interval_s: 0.5
    tap_y_norm: 0.10
    # 15% 会导致点击到播放按钮, 先减少看看会不会有适配问题, TV 端操作模式不同, 可能不需要这个值
    post_tap_sleep_ms: 250
    wake_keywords: ["Brightness", "Seek"]
  

# 设备配置组 - 支持多设备配置
devices:
  # 设备唯一标识 (用于路径生成和资源管理)
  mi9_pro_5g:
    # === 设备连接信息 ===
    connection:
      adb_serial: "192.168.100.112"               # ADB设备序列号(null=自动检测)
      connection_timeout: 10
    # === 设备基本信息 ===
    phone_type: "android_phone"  # android_phone, android_tablet, android_tv
    custom_name: "小米9Pro 5G"
    description: "这里时自定义手机信息"
    
    # === 设备硬件信息 (可自动探测覆盖) ===
    android_version: "10"
    screen_info:
      resolution: "1440x2560"        # 物理分辨率
      override_resolution: null      # 覆盖分辨率(如果有)
      density: 440                   # 屏幕密度
      orientation: "portrait"        # portrait/landscape
      
    hardware_info:
      brand: "Xiaomi"
      model: "Mi9_Pro_5G"
      cpu_cores: 8
      memory_gb: 8
      
    # === 测试执行配置 ===
    execution_config:
      interaction_delay: 0.5         # 操作间隔(秒)
      screenshot_format: "png"       # 截图格式
      screenshot_quality: 90         # 截图质量
      max_wait_time: 20             # 最大等待时间
      
    # === 识别配置 ===
    recognition_config:
      primary_mode: "xml"            # xml, visual, hybrid
      fallback_mode: "visual"        # 主模式失败时的备用模式
      confidence_threshold: 0.8      # 视觉识别置信度
      element_wait_timeout: 10       # 元素等待超时

  Pixel_7_Pro:
    # === 设备连接信息 ===
    connection:
      adb_serial: "192.168.8.100"               # ADB设备序列号(null=自动检测)
      connection_timeout: 10
    # === 设备基本信息 ===
    phone_type: "android_phone"  # android_phone, android_tablet, android_tv
    custom_name: "Pixel 7 Pro"
    description: "这里时自定义手机信息"
    
    # === 设备硬件信息 (可自动探测覆盖) ===
    android_version: "13"
    screen_info:
      resolution: "1080x2340"        # 物理分辨率
      override_resolution: null      # 覆盖分辨率(如果有)
      density: 440                   # 屏幕密度
      orientation: "portrait"        # portrait/landscape
      
    hardware_info:
      brand: "Google"
      model: "Pixel 7 Pro"
      cpu_cores: 8
      memory_gb: 8
      
    # === 测试执行配置 ===
    execution_config:
      interaction_delay: 0.5         # 操作间隔(秒)
      screenshot_format: "png"       # 截图格式
      screenshot_quality: 90         # 截图质量
      max_wait_time: 20             # 最大等待时间
      
    # === 识别配置 ===
    recognition_config:
      primary_mode: "xml"            # xml, visual, hybrid
      fallback_mode: "visual"        # 主模式失败时的备用模式
      confidence_threshold: 0.8      # 视觉识别置信度
      element_wait_timeout: 10       # 元素等待超时


      

# 应用配置组 - 支持多应用测试
applications:
  
  # 示例应用 (原配置保留)
  brav_mob:
    package_name: "com.mobile.brasiltvmobile"
    app_name: "Brav mob"
    description: "brav_mob 公共"
    ui_activity: "com.mobile.brasiltv.activity.SplashAty"  
    # 启动方式可使用指定 activty 方式, 具体每一个 APK 是什么找开发看下就好 : adb shell am start -S -W com.mobile.brasiltvmobile/com.mobile.brasiltv.activity.SplashAty  -S 强制重启, -n 不会停止, 只是再加一层 Activity
    # 播放场景自动唤起（分析/执行阶段对外透明）
    playback_auto_wake:
      wake_keywords: ["Brightness", "Seek"]
  brav_tv:
    package_name: "com.interactive.brasiliptv"
    app_name: "Brav tv"
    description: "brav_tv 葡语自有"
    ui_activity: "com.interactive.brasiliptv.ui.activity.WelcomeActivity"    


# 测试套件配置
test_suites:
  vod_playback_test:
    devices: ["mi9_pro_5g"]
    applications: ["brav_mob"]
    cases:
      - type: "app_launch"
        description: "vod 点播播放测试"
        json_path: "testcases/generate/example_airtest_record.json"
        path: "testcases/python/example_airtest_record.py"
        coord_py_case: "testcases/python/example_airtest_record.py"  # if is "", use path
# when it has already excute, it will record the coordinates of the elements in json_path each step. the we can use this py to excute the case to speed-up excute tiem .

  generated_latest:
    devices: ["mi9_pro_5g"]
    applications: ["brav_mob"]
    cases:
      - type: "generated_case"
        description: "Run latest generated testcase (JSON→PY if needed)"
        json_path: "USE_LATEST"  # runner will resolve to latest in only_test/testcases/generated/*.json
        python_path: "USE_LATEST_PY"  # if latest PY exists it will prefer this


# 路径模板配置
path_templates:
  # 资源文件路径模板
  assets_path: "assets/{app_package}_{device_model}"
  # 测试用例路径模板
  testcase_path: "testcases/generated/{app_name}_{device_name}"
  # 报告路径模板
  report_path: "reports/{suite_name}_{timestamp}"
  # Python代码路径模板
  python_path: "testcases/python/test_{app_name}_{scenario}.py"
